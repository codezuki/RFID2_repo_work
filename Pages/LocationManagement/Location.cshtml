@page
@model RFID2.Pages.LocationManagement.LocationModel
@{
    ViewData["Title"] = "Locations";
}
@if (TempData["SuccessMessage"] != null)
{
    <div class="alert-auto-hide fixed bottom-4 right-4 z-50 w-80 rounded-2xl border border-green-300 bg-white p-4 shadow-xl transition-all">
        <div class="flex items-start">
            <div class="flex-shrink-0 rounded-full bg-green-100 p-2 text-green-600">
                ✅
            </div>
            <div class="ml-3 text-sm text-gray-800">
                @TempData["SuccessMessage"]
            </div>
            <button onclick="this.parentElement.parentElement.remove()" class="ml-auto text-gray-500 hover:text-gray-700">&times;</button>
        </div>
    </div>
}

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert-auto-hide fixed bottom-4 right-4 z-50 w-80 rounded-2xl border border-red-300 bg-white p-4 shadow-xl transition-all">
        <div class="flex items-start">
            <div class="flex-shrink-0 rounded-full bg-red-100 p-2 text-red-600">
                ❌
            </div>
            <div class="ml-3 text-sm text-gray-800">
                @TempData["ErrorMessage"]
            </div>
            <button onclick="this.parentElement.parentElement.remove()" class="ml-auto text-gray-500 hover:text-gray-700">&times;</button>
        </div>
    </div>
}


<h3>Location</h3>

<form method="post">
    <div class="mb-3 text-end">
        <button type="button" class="btn btn-primary" onclick="showLocationForm()">Add New Location</button>
    </div>
    <br/>
    <div id="locationForm" class="card p-3 d-none">
        <label>Location Name *</label>
        <input asp-for="LocationName" class="form-control mb-2" />
        <div class="text-end">
            <button type="submit" class="btn btn-success">Save</button>
            <button type="button" class="btn btn-danger" onclick="hideLocationForm()">Cancel</button>
        </div>
    </div>
</form>

<table class="min-w-full divide-y divide-gray-200 table table-bordered dataTable mt-6">
    <thead class="table-light">
        <tr>
            <th>Location Name</th>
            <th>View Details</th>
            <th>Edit</th>
            <th>Delete</th>
        </tr>
        @* <tr>
            <th><input type="text" placeholder="Search Name" /></th>
            <th></th>
            <th></th>
        </tr> *@
    </thead>
    <tbody>
        @foreach (var loc in Model.Locations)
        {
            <tr>
                <td>@loc.LocationName</td>
                <td>
                    <button class="text-sm rounded-md bg-blue-100 px-3 py-1.5 text-blue-600 hover:bg-blue-200 transition">
                        👁️
                    </button>
                </td>
                <td><button class="btn btn-warning btn-sm">✏️</button></td>
                <td><button class="btn btn-danger btn-sm">❌</button></td>
            </tr>
        }
    </tbody>
</table>

@section Scripts {
    <script>
         function showLocationForm() { document.getElementById("locationForm").classList.remove("d-none"); }
        function hideLocationForm() { document.getElementById("locationForm").classList.add("d-none"); }
      
        setTimeout(() => {
            document.querySelectorAll('.alert-auto-hide')?.forEach(el => el.remove());
        }, 4000); // Hide after 4 seconds
    
        
        
        // function saveLocation() {
        //     const name = document.getElementById("locationName").value.trim();
        //     if (!name) return alert("Location required");
        //     locations.push(name);
        //     renderLocations();
        //     hideLocationForm();
        //     alert("Location saved");
        // }
        </script>
       
    <partial name="_DataTableScript" />
}
